// Java conventions common for all of the code
plugins {
    id 'idea'
    id 'java'
    id 'com.diffplug.spotless'
    id 'com.github.spotbugs'
}

repositories {
    mavenCentral()
    google()
}

// Spotless configuration
spotless {
    java {
        googleJavaFormat()
        targetExclude "${buildDir}/**"
    }
}
build.dependsOn spotlessApply

// Spotbugs configuration
spotbugs {
    effort = 'max'
    // This makes the "html" reports come out in plain text so you can just open the file in IntelliJ
    // and look at your bugs instead of having to switch to a browser.
    extraArgs = [ '-emacs']
}
spotbugsMain {
    reports {
        html {
            enabled = true
            destination = file("$buildDir/reports/spotbugs/main.txt")
            stylesheet = 'fancy.xsl'
        }
    }
}
spotbugsTest {
    reports {
        html {
            enabled = true
            destination = file("$buildDir/reports/spotbugs/test.txt")
            stylesheet = 'fancy.xsl'
        }
    }
}
